---
phase: 15-i18n-coverage
plan: 02
type: execute
wave: 2
depends_on: ["15-01"]
files_modified:
  - apps/web/lib/i18n/translations.ts
  - apps/web/app/(app)/components/rating-modal.tsx
  - apps/web/app/(app)/components/cancellation-dialog.tsx
  - apps/web/app/(app)/components/report-dialog.tsx
  - apps/web/app/(app)/components/ride-status-badge.tsx
  - apps/web/app/(app)/settings/language/page.tsx
  - apps/web/app/(public)/ride/[shortId]/page.tsx
autonomous: true
requirements: [I18N-02, I18N-06]

must_haves:
  truths:
    - "Rating modal shows all UI text in the selected locale"
    - "Cancellation dialog shows all UI text in the selected locale"
    - "Report dialog shows all UI text in the selected locale"
    - "Ride status badges show translated status labels"
    - "Language settings page shows translated UI (Back, Language heading, toast)"
    - "Public ride page shows translated UI via a client sub-component"
  artifacts:
    - path: "apps/web/app/(app)/components/rating-modal.tsx"
      provides: "Fully translated rating modal"
      contains: "useI18n"
    - path: "apps/web/app/(app)/components/cancellation-dialog.tsx"
      provides: "Fully translated cancellation dialog"
      contains: "useI18n"
    - path: "apps/web/app/(app)/components/report-dialog.tsx"
      provides: "Fully translated report dialog"
      contains: "useI18n"
    - path: "apps/web/app/(app)/components/ride-status-badge.tsx"
      provides: "Translated status labels"
      contains: "useI18n"
    - path: "apps/web/app/(app)/settings/language/page.tsx"
      provides: "Fully translated language settings"
      contains: "t("
    - path: "apps/web/lib/i18n/translations.ts"
      provides: "New keys for rating, cancellation, report, rideStatus, settings namespaces"
      contains: "rating."
  key_links:
    - from: "apps/web/app/(public)/ride/[shortId]/page.tsx"
      to: "apps/web/lib/i18n/provider.tsx"
      via: "Client sub-component using useI18n"
      pattern: "useI18n|use client"
---

<objective>
Translate remaining core flow components (rating-modal, cancellation-dialog, report-dialog, ride-status-badge), polish the language settings page, and handle the public ride page server component.

Purpose: Completes all core flow i18n coverage and ensures the language settings page itself is fully translated.
Output: ~35 new translation keys, 6 more components fully translated, public ride page i18n handled.
</objective>

<execution_context>
@/Users/miakh/.claude/get-shit-done/workflows/execute-plan.md
@/Users/miakh/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-i18n-coverage/15-RESEARCH.md
@.planning/phases/15-i18n-coverage/15-01-SUMMARY.md
@apps/web/app/(app)/components/rating-modal.tsx
@apps/web/app/(app)/components/cancellation-dialog.tsx
@apps/web/app/(app)/components/report-dialog.tsx
@apps/web/app/(app)/components/ride-status-badge.tsx
@apps/web/app/(app)/settings/language/page.tsx
@apps/web/app/(public)/ride/[shortId]/page.tsx
@apps/web/lib/i18n/translations.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Translate rating-modal, cancellation-dialog, and report-dialog</name>
  <files>
    apps/web/app/(app)/components/rating-modal.tsx
    apps/web/app/(app)/components/cancellation-dialog.tsx
    apps/web/app/(app)/components/report-dialog.tsx
    apps/web/lib/i18n/translations.ts
  </files>
  <action>
For each dialog/modal component:

1. **rating-modal.tsx** (~10 strings):
   - Add useI18n import and hook call
   - Replace hardcoded strings with `rating.*` namespace keys
   - Key strings: "Rate your ride with {name}" (use interpolation), "How was your experience", "Comment (optional)", "Share your experience...", "Submit Rating", "Submitting...", error/success toast messages
   - Star labels if any

2. **cancellation-dialog.tsx** (~8 strings):
   - Add useI18n import and hook call
   - Replace hardcoded strings with `cancellation.*` namespace keys
   - Key strings: "Cancel Booking" / "Cancel Ride" (conditional), warning message about cancellation impact, "Reason (optional)", placeholder text, "Keep" (dismiss button), "Confirm Cancellation", "Cancelling...", toast messages
   - The dialog likely has a `type` prop (booking vs ride) -- make sure both variants are translated

3. **report-dialog.tsx** (~8 strings):
   - Add useI18n import and hook call
   - Replace hardcoded strings with `report.*` namespace keys
   - Key strings: "Report {name}" (use interpolation), description prompt, placeholder, minimum character hint, "Cancel", "Submit Report", "Submitting...", toast messages

4. **translations.ts**: Add all new keys to TranslationKeys type and all three dictionaries.
   - Czech: natural Czech, informal "ty" form
   - Slovak: machine translate from Czech with proper Slovak vocabulary
   - English: natural, concise
  </action>
  <verify>
Run `npx tsc --noEmit` from apps/web. Grep each file for remaining hardcoded English strings in JSX.
  </verify>
  <done>rating-modal.tsx, cancellation-dialog.tsx, and report-dialog.tsx use t() for all user-facing strings with ~26 new translation keys in all three locales.</done>
</task>

<task type="auto">
  <name>Task 2: Translate ride-status-badge, language settings, and public ride page</name>
  <files>
    apps/web/app/(app)/components/ride-status-badge.tsx
    apps/web/app/(app)/settings/language/page.tsx
    apps/web/app/(public)/ride/[shortId]/page.tsx
    apps/web/lib/i18n/translations.ts
  </files>
  <action>
1. **ride-status-badge.tsx** (~5 strings):
   - Add useI18n import and hook call
   - Replace status label strings with `rideStatus.*` namespace keys
   - Status labels: "Upcoming", "In Progress", "Completed", "Cancelled", and any other status variants
   - Keep badge color logic unchanged, only translate the text labels

2. **settings/language/page.tsx** (3 strings):
   - This file already uses useI18n for some content but has 3 hardcoded strings
   - Replace "Back" with `t('common.back')` or `t('settings.back')` -- check if a common.back key already exists
   - Replace "Language" heading with `t('settings.language')`
   - Replace the toast success message with `t('settings.languageChanged')`
   - Add new keys to translations.ts if they don't already exist

3. **Public ride page** `(public)/ride/[shortId]/page.tsx` (~10 strings):
   - This is a SERVER component -- it CANNOT use useI18n() hook directly
   - Check if the page already delegates rendering to a client component (like RideDetail does for /rides/[id]/page.tsx)
   - If it renders UI directly: extract the translated UI parts into a client sub-component (e.g., `PublicRideContent`) with `"use client"` directive that uses useI18n()
   - The server page keeps: metadata generation (generateMetadata), data fetching, SEO strings (English OK)
   - The client sub-component gets: all user-visible UI text (per seat, seats left, booking CTA, departure info, notes label, driver info labels)
   - Key strings: "per seat", "seats left", "Departure at", "Notes", "Book this ride", "New driver", "review/reviews"
   - If the page already uses client components for display, just add i18n to those client components

4. **translations.ts**: Add all new keys.
  </action>
  <verify>
Run `npx tsc --noEmit` from apps/web. Verify language settings page has no hardcoded English. Verify public ride page renders via client component for translated strings.
  </verify>
  <done>ride-status-badge shows translated status labels. Language settings page is fully translated. Public ride page shows translated UI via client sub-component. ~15 new translation keys added.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes in apps/web
2. All 6 components use t() for user-facing strings
3. Language settings page shows translated "Back", "Language", and toast text
4. Public ride page server component does not call useI18n() directly
5. No hardcoded English strings remain in any of the translated components
</verification>

<success_criteria>
- rating-modal, cancellation-dialog, report-dialog fully translated
- ride-status-badge shows translated status labels
- Language settings page fully translated (I18N-06 complete)
- Public ride page translated via client sub-component
- All core flow files complete (I18N-02 complete)
- TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/15-i18n-coverage/15-02-SUMMARY.md`
</output>
