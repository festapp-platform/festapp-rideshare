---
phase: 15-i18n-coverage
plan: 03
type: execute
wave: 3
depends_on: ["15-02"]
files_modified:
  - apps/web/lib/i18n/translations.ts
  - apps/web/app/(app)/components/block-button.tsx
  - apps/web/app/(app)/components/ride-card.tsx
  - apps/web/components/cookie-consent.tsx
  - apps/web/components/force-update-banner.tsx
  - apps/web/app/(app)/components/pwa-install-banner.tsx
  - apps/web/components/offline-banner.tsx
  - apps/web/app/(app)/components/share-button.tsx
  - apps/web/app/(app)/components/pending-rating-banner.tsx
  - apps/web/app/not-found.tsx
autonomous: true
requirements: [I18N-03, I18N-04, I18N-05]

must_haves:
  truths:
    - "Block button shows translated text (Block, Unblock, confirmation) in selected locale"
    - "Ride card shows translated labels (seats left, km, Instant/Request) in selected locale"
    - "Cookie consent banner displays in selected locale instead of hardcoded English"
    - "Force update banner shows translated text in selected locale"
    - "PWA install banner shows translated text in selected locale"
    - "Offline banner shows translated text in selected locale"
    - "Share button shows translated text in selected locale"
    - "Pending rating banner shows translated text in selected locale"
    - "404 not-found page shows translated text in selected locale"
  artifacts:
    - path: "apps/web/components/cookie-consent.tsx"
      provides: "Cookie consent with i18n"
      contains: "useI18n"
    - path: "apps/web/app/not-found.tsx"
      provides: "Translated 404 page"
      contains: "useI18n"
    - path: "apps/web/lib/i18n/translations.ts"
      provides: "Complete translation coverage for all secondary and minor components"
      contains: "cookieConsent."
  key_links:
    - from: "apps/web/components/cookie-consent.tsx"
      to: "apps/web/lib/i18n/provider.tsx"
      via: "useI18n() hook import"
      pattern: "useI18n"
    - from: "apps/web/app/not-found.tsx"
      to: "apps/web/lib/i18n/provider.tsx"
      via: "useI18n() or client sub-component"
      pattern: "use client|useI18n"
---

<objective>
Translate all secondary UI components (block-button, ride-card, cookie-consent, force-update-banner, pwa-install-banner) and all minor components (offline-banner, share-button, pending-rating-banner, not-found) to complete full i18n coverage.

Purpose: Ensures every user-facing string in the entire app is translated, completing the Phase 15 goal.
Output: ~35 new translation keys, 9 components fully translated, cookie consent i18n complete.
</objective>

<execution_context>
@/Users/miakh/.claude/get-shit-done/workflows/execute-plan.md
@/Users/miakh/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-i18n-coverage/15-RESEARCH.md
@.planning/phases/15-i18n-coverage/15-02-SUMMARY.md
@apps/web/components/cookie-consent.tsx
@apps/web/components/offline-banner.tsx
@apps/web/components/force-update-banner.tsx
@apps/web/app/(app)/components/block-button.tsx
@apps/web/app/(app)/components/ride-card.tsx
@apps/web/app/(app)/components/pwa-install-banner.tsx
@apps/web/app/(app)/components/share-button.tsx
@apps/web/app/(app)/components/pending-rating-banner.tsx
@apps/web/app/not-found.tsx
@apps/web/lib/i18n/translations.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Translate secondary UI components (block-button, ride-card, cookie-consent, force-update, pwa-install)</name>
  <files>
    apps/web/app/(app)/components/block-button.tsx
    apps/web/app/(app)/components/ride-card.tsx
    apps/web/components/cookie-consent.tsx
    apps/web/components/force-update-banner.tsx
    apps/web/app/(app)/components/pwa-install-banner.tsx
    apps/web/lib/i18n/translations.ts
  </files>
  <action>
For each component, add useI18n import, hook call, and replace all hardcoded strings:

1. **block-button.tsx** (~6 strings, `block.*` namespace):
   - "Block", "Unblock", "Block {name}?" (interpolation), confirmation message about blocking effects, toast messages for block/unblock success

2. **ride-card.tsx** (~4 strings, `rideCard.*` namespace):
   - "seats left" / "seat left", "km from your pickup", "Instant", "Request" (booking mode labels)
   - Use interpolation for dynamic values: `t('rideCard.seatsLeft', { count: seats })`

3. **cookie-consent.tsx** (~3 strings, `cookieConsent.*` namespace):
   - This component is in `apps/web/components/` (not inside (app)), so verify it's wrapped by I18nProvider. If it renders inside the app layout that has I18nProvider, useI18n will work. If it renders outside the provider (e.g., in root layout before provider), you'll need to either move the component inside the provider boundary or add "use client" and import the provider.
   - Replace cookie message text, "Decline" button, "Accept" button with t() calls
   - Keys: `cookieConsent.message`, `cookieConsent.decline`, `cookieConsent.accept`

4. **force-update-banner.tsx** (~3 strings, `forceUpdate.*` namespace):
   - Update available message, "Dismiss" button, "Refresh" button

5. **pwa-install-banner.tsx** (~2 strings, `pwaInstall.*` namespace):
   - "Install Rideshare on your phone" (or similar), "Install" button

6. **translations.ts**: Add ALL new keys to TranslationKeys type and all three locale dictionaries.
   - Czech: natural Czech
   - Slovak: machine translate from Czech with proper Slovak
   - English: natural, concise

**Important for cookie-consent.tsx:** Verify the component's position in the component tree relative to I18nProvider. If cookie-consent renders outside the I18nProvider, you may need to restructure. Check the root layout and app layout to determine where I18nProvider wraps.
  </action>
  <verify>
Run `npx tsc --noEmit` from apps/web. Grep each file for remaining hardcoded English strings in JSX. Verify cookie-consent.tsx correctly imports and uses useI18n.
  </verify>
  <done>block-button, ride-card, cookie-consent, force-update-banner, and pwa-install-banner all use t() for user-facing strings. Cookie consent banner displays in selected locale. ~18 new keys added.</done>
</task>

<task type="auto">
  <name>Task 2: Translate minor components (offline-banner, share-button, pending-rating-banner, not-found)</name>
  <files>
    apps/web/components/offline-banner.tsx
    apps/web/app/(app)/components/share-button.tsx
    apps/web/app/(app)/components/pending-rating-banner.tsx
    apps/web/app/not-found.tsx
    apps/web/lib/i18n/translations.ts
  </files>
  <action>
1. **offline-banner.tsx** (~1 string, `offlineBanner.*` namespace):
   - Replace "You're offline. Some features may not work." (or similar) with t() call
   - Same I18nProvider consideration as cookie-consent -- verify this is inside the provider boundary

2. **share-button.tsx** (~2 strings, `shareButton.*` namespace):
   - "Copied!" toast/tooltip, "Share" button text

3. **pending-rating-banner.tsx** (~2 strings, `pendingRating.*` namespace):
   - "You have {count} rides to rate" (use interpolation), "Rate now" link/button

4. **not-found.tsx** (~3 strings, `notFound.*` namespace):
   - This is a server component (Next.js not-found page). It CANNOT use useI18n() directly.
   - Solution: Add `"use client"` directive at the top of the file. The not-found page has no server-side data needs (no generateMetadata with dynamic data, no data fetching), so converting to a client component is the simplest approach.
   - Replace "404", "This page doesn't exist" (or similar), "Go to home" with t() calls
   - Keys: `notFound.title`, `notFound.message`, `notFound.goHome`

5. **translations.ts**: Add all remaining new keys to TranslationKeys type and all three dictionaries.

6. **Final audit**: After all changes, do a final check:
   - Verify login/page.tsx and signup/page.tsx have no remaining hardcoded strings (research says they're mostly translated, verify completeness)
   - Verify reset-password/page.tsx is fully translated
   - If any gaps found in already-translated files, add missing t() calls and keys
  </action>
  <verify>
Run `npx tsc --noEmit` from apps/web. Do a broad grep across all component files for obvious hardcoded English UI strings that should be translated. Verify not-found.tsx has "use client" and uses useI18n.
  </verify>
  <done>All minor components translated. not-found.tsx converted to client component with i18n. Final audit confirms no remaining hardcoded English in user-facing components. All I18N-03, I18N-04, I18N-05 requirements met.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes in apps/web
2. Cookie consent banner uses i18n (I18N-05)
3. All secondary files use t() (I18N-03)
4. All minor files use t() (I18N-04)
5. not-found.tsx is a client component with translated text
6. No remaining hardcoded English strings in any user-facing component
7. Final translation key count: ~295-315 keys per locale in translations.ts
</verification>

<success_criteria>
- Every secondary UI component fully translated (I18N-03)
- Every minor UI component fully translated (I18N-04)
- Cookie consent banner displays in selected locale (I18N-05)
- 404 page displays in selected locale
- Zero hardcoded English strings remain in user-facing components
- TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/15-i18n-coverage/15-03-SUMMARY.md`
</output>
